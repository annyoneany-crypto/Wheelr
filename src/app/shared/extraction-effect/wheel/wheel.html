<div class="relative flex flex-col items-center gap-8 mt-16 z-10">
    
    <!-- Win pointer -->
    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20 drop-shadow-[0_10px_18px_rgba(0,0,0,0.45)]">
      <svg width="72" height="72" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
        <!-- Futuristic down pointer (body) -->
        <path
          d="M32 58L12 34h12V14c0-2.2 1.8-4 4-4h8c2.2 0 4 1.8 4 4v20h12L32 58z"
          [attr.fill]="wheelConfigurator.pointerContrastColor()"
          [attr.stroke]="wheelConfigurator.pointerSliceColor()"
          stroke-width="2"
          stroke-linejoin="round"
        />

        <!-- Futuristic details (inner cuts / accents) -->
        <path
          d="M32 52L18 34h10V18h8v16h10L32 52z"
          fill="none"
          [attr.stroke]="wheelConfigurator.pointerSliceColor()"
          stroke-width="2"
          stroke-linejoin="round"
          opacity="0.75"
        />
        <path
          d="M28 22h8"
          fill="none"
          [attr.stroke]="wheelConfigurator.pointerSliceColor()"
          stroke-width="2"
          stroke-linecap="round"
          opacity="0.75"
        />
      </svg>
    </div>

    <!-- Canvas Wheel -->
    <div class="relative cursor-pointer group" (click)="wheelConfigurator.spinWheel()">
      <canvas 
        #wheelCanvas 
        width="800" 
        height="800" 
        class="max-w-[90vw] max-h-[90vh] rounded-full shadow-[0_0_50px_rgba(0,0,0,0.5)] transition-transform"
        [style.transform]="'rotate(' + wheelConfigurator.currentRotation() + 'deg)'"
        [style.transitionDuration]="wheelConfigurator.isSpinning() ? (wheelConfigurator.spinDurationMs() + 'ms') : '100ms'"
        [style.transitionTimingFunction]="wheelConfigurator.isSpinning() ? 'cubic-bezier(0.15, 0, 0.15, 1)' : 'linear'"
        [style.backgroundColor]="wheelConfigurator.names().length === 0 ? '#5e5e5e' : 'transparent'"
      ></canvas>
      
      <!-- Center -->
      <div
        class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full flex items-center justify-center shadow-xl border-4 border-neutral-900 z-10 group-hover:scale-110 transition-transform overflow-hidden bg-white"
        [class.w-14]="wheelConfigurator.centerLogoSize() === 's'"
        [class.h-14]="wheelConfigurator.centerLogoSize() === 's'"
        [class.w-20]="wheelConfigurator.centerLogoSize() === 'm'"
        [class.h-20]="wheelConfigurator.centerLogoSize() === 'm'"
        [class.w-24]="wheelConfigurator.centerLogoSize() === 'l'"
        [class.h-24]="wheelConfigurator.centerLogoSize() === 'l'"
        [class.w-28]="wheelConfigurator.centerLogoSize() === 'xl'"
        [class.h-28]="wheelConfigurator.centerLogoSize() === 'xl'"
        [class.w-36]="wheelConfigurator.centerLogoSize() === 'xxl'"
        [class.h-36]="wheelConfigurator.centerLogoSize() === 'xxl'"
        [class.w-48]="wheelConfigurator.centerLogoSize() === 'xxxl'"
        [class.h-48]="wheelConfigurator.centerLogoSize() === 'xxxl'">
        @if (wheelConfigurator.centerImage()) {
          <img [src]="wheelConfigurator.centerImage()" class="w-full h-full object-cover" alt="Center">
        } @else {
          <span class="text-neutral-900 font-bold text-sm">SPIN</span>
        }
      </div>

      <!-- Flame Animation -->
      @if (wheelConfigurator.winner()) {
        <ng-content></ng-content>
      }
    </div>

    <!-- Text -->
    <div class="h-16 flex items-center justify-center text-center">
      @if (wheelConfigurator.isSpinning()) {
        <p class="text-white drop-shadow-lg animate-pulse uppercase tracking-widest font-semibold">Destiny is choosing...</p>
      } @else if (!wheelConfigurator.winner()) {
        <p class="text-white drop-shadow-lg uppercase tracking-widest font-semibold">Click the wheel to spin</p>
      }
    </div>
  </div>
